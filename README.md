# SVD图像压缩演示工具

这是一个基于奇异值分解(SVD)的图像压缩演示教具，支持黑白和彩色图像的压缩。

## 功能特性

### 1. SVD算法优化
- ✅ 修复了奇异值个数计算问题，确保理论上限为min(m, n)
- ✅ 对大矩阵至少计算60%的奇异值，小矩阵尽可能计算所有奇异值
- ✅ 改进了特征值分解的收敛判断和数值稳定性
- ✅ 优化了U矩阵计算方法，增加归一化步骤

### 2. 测试图片功能
- ✅ 在控制面板顶部提供4张预设测试图片
- ✅ 点击测试图片可直接用于压缩演示
- ✅ 支持灰度图、校徽、学校图片、风景图片等不同类型

### 3. RGB图像分通道显示
- ✅ 对彩色图像显示R、G、B三个通道的压缩效果
- ✅ 每个通道以对应颜色显示（红、绿、蓝）
- ✅ 最终融合显示完整的压缩结果

### 4. 压缩方式
- **按奇异值个数占比**：保留指定比例的奇异值
- **按奇异值之和占比**：保留能量占比达到指定值的奇异值

## 使用说明

### 方法1：上传图片文件
1. 点击上传区域或拖拽图片文件
2. 选择压缩方式和保留比例
3. 点击"开始压缩"

### 方法2：使用测试图片
1. 点击控制面板中的任意测试图片
2. 在弹出的文件选择器中选择对应的图片文件
   - 灰度图：选择 `images/gray.jpg`
   - 校徽：选择 `images/xidian.jpg`
   - 学校：选择 `images/学校图片.jpg`
   - 风景：选择 `images/风景1.jpg`
3. 调整压缩参数
4. 点击"开始压缩"

## 技术说明

### 浏览器安全限制
由于浏览器的安全策略，无法直接从本地文件系统加载图片到Canvas进行处理。因此：

- **测试图片功能**：需要用户手动选择对应的图片文件
- **推荐方式**：使用本地HTTP服务器运行项目（如Live Server）

### 运行环境
- **推荐**：使用VS Code的Live Server插件或其他本地服务器
- **备用**：直接打开HTML文件，但测试图片需要手动选择

### 文件结构
```
ImageCompress/
├── main.html          # 主页面
├── app.js             # 主应用逻辑
├── svd.js             # SVD算法实现
├── styles.css         # 样式文件
├── images/            # 测试图片文件夹
│   ├── gray.jpg       # 灰度测试图
│   ├── xidian.jpg     # 校徽图片
│   ├── 学校图片.jpg    # 学校图片
│   └── 风景1.jpg       # 风景图片
└── README.md          # 说明文档
```

## 压缩效果展示

### 黑白图像
- 显示单一压缩结果
- 展示奇异值分布图表
- 计算压缩比和均方误差

### 彩色图像
- 显示R、G、B三个通道的分别压缩效果
- 展示最终融合的压缩结果
- 提供详细的压缩统计信息

## 技术特点

1. **纯前端实现**：无需服务器，完全在浏览器中运行
2. **实时压缩**：支持实时调整压缩参数
3. **可视化展示**：直观显示压缩效果和统计信息
4. **教学友好**：适合用于线性代数和图像处理教学

## 故障排除

### 问题：点击测试图片后提示"请先上传图像"
**解决方案**：
1. 确保在文件选择器中选择了正确的图片文件
2. 检查images文件夹中是否存在对应的图片文件
3. 尝试使用文件上传功能直接选择图片

### 问题：压缩速度较慢
**解决方案**：
1. 图片会自动缩放到800x800以内以提高性能
2. 大图片的SVD计算需要一定时间，请耐心等待
3. 可以选择较小的图片进行测试

### 问题：RGB分通道显示异常
**解决方案**：
1. 确保使用的是彩色图片（非灰度图）
2. 检查浏览器控制台是否有错误信息
3. 尝试刷新页面重新加载

## 开发信息

- **开发语言**：HTML5, CSS3, JavaScript (ES6+)
- **核心算法**：奇异值分解(SVD)
- **图像处理**：Canvas API
- **UI框架**：原生JavaScript
- **兼容性**：现代浏览器（Chrome, Firefox, Safari, Edge）
